%|--------------------------------------------------------------------|
%| Custom Beamer Theme Add-ons (tcolorbox blocks & layout tweaks)
%| Link:  https://www.r-bloggers.com/create-your-own-beamer-template/
%|        http://www.cpt.univ-mrs.fr/~masson/latex/Beamer-appearance-cheat-sheet.pdf
%| Author: Toninus
%| Last updated: 2025-10-22
%|--------------------------------------------------------------------|

\mode<presentation>

%======================================================================%
% Requirements
%======================================================================%
\RequirePackage[most]{tcolorbox}   % advanced boxes
\RequirePackage{tikz}
\usetikzlibrary{decorations.pathmorphing} % for zigzag borders

%======================================================================%
% Theme hook-up (uses your custom 'toninus' theme)
%======================================================================%
\useinnertheme{toninus}
\useoutertheme{toninus}
\usecolortheme{toninus}

%======================================================================%
% Navigation & Blocks
%======================================================================%
\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{blocks}[framed=true,rounded,shadow=true]

%======================================================================%
% Page geometry
%======================================================================%
\setbeamersize{
  text margin left=1em,
  text margin right=1em,
  sidebar width left=0em,
  sidebar width right=0em
}

%======================================================================%
% ToC appearance
%======================================================================%
\setbeamertemplate{section in toc}[square]
\setbeamertemplate{subsection in toc}[ball unnumbered]

% (Optional outline slide)
% \AtBeginSection[]{
%   \begin{frame}{Outline}
%     \tableofcontents[currentsection,currentsubsection]
%   \end{frame}
% }

%======================================================================%
% Fonts
%======================================================================%
\setbeamerfont{note page}{size=\footnotesize}
% \usefonttheme{serif}


%======================================================================%
% tcolorbox: shared defaults for a clean, consistent look
%======================================================================%
\tcbset{
  colback=white,
  colbacktitle=white,
  boxrule=0.8pt,
  arc=2mm,
  titlerule=0pt,
  left=0em, right=0em, top=0em, bottom=0em,   % inner content spacing
  toptitle=-0.2em, bottomtitle=-0.2em,        % title spacing
  enhanced
}

% Convenience color names (adjust to taste)
%   red!70!black   -> definition-like
%   blue!70!black  -> theorem/proposition/corollary
%   purple!70!black -> “upshot”/takeaway
%   orange!90!black -> math emphasis
%   black!70!white -> neutral/notes
%   brown!70!black -> aside/remark

%======================================================================%
% Definition / Proposition / Theorem family
%======================================================================%
\newtcolorbox{defblock}[1][]{
  coltitle=red!70!black,
  colframe=red!70!black,
  title={Def: \strut#1}
}

\newtcolorbox{notblock}[1][]{
  coltitle=green!70!black,
  colframe=green!70!black,
  title={Notation: \strut#1}
}
\newtcolorbox{denotblock}[1][]{
  coltitle=green!80!black,
  colframe=green!80!black,
  title={Denote: \strut#1}
}


\newtcolorbox{propblock}[1][]{
  coltitle=blue!70!black,
  colframe=blue!70!black,
  title={Prop: \strut#1}
}

\newtcolorbox{thmblock}[1][]{
  coltitle=blue!70!black,
  colframe=blue!70!black,
  title={Thm: \strut#1}
}

\newtcolorbox{corblock}[1][]{
  coltitle=blue!70!black,
  colframe=blue!70!black,
  title={Cor: \strut#1}
}

\newtcolorbox{lemblock}[1][]{
  coltitle=blue!70!black,
  colframe=blue!70!black,
  title={Lemma: \strut#1}
}

% Definition/Proposition hybrid with dual border
\newtcolorbox{defpropblock}[1][]{
  breakable,
  coltitle=red!70!black,
  colframe=red!70!black,
  borderline={0.5mm}{0mm}{red!70!black},
  borderline={0.5mm}{0mm}{blue!70!black,dashed},
  title={Def/Prop: \strut#1}
}

\newtcolorbox{defthmblock}[1][]{
  breakable,
  coltitle=red!70!black,
  colframe=red!70!black,
  borderline={0.5mm}{0mm}{red!70!black},
  borderline={0.5mm}{0mm}{blue!70!black,dashed},
  title={Def/Thm: \strut#1}
}

%======================================================================%
% Proof / Claim / Example / Math emphasis
%======================================================================%
\newtcolorbox{proofblock}{
  colframe=blue!75!black
}

\newtcolorbox{claimblock}{
  detach title,
  coltitle=blue!70!black,
  colframe=blue!70!black,
  title={Claim:},
  overlay={
    \node[minimum width=1cm,xshift=0.8cm] at (frame.west) {\tcbtitle};
  }
}
\newtcolorbox{claimblocktitle}[1][]{
  coltitle=blue!70!black,
  colframe=blue!70!black,
  title={Upshot: \strut#1}
}

\newtcolorbox{exblock}[1][]{
  coltitle=black!90!white,
  colframe=black!70!white,
  title={Example: \strut#1}
}

\newtcolorbox{mathblock}[1][]{
  coltitle=orange!70!black,
  colframe=orange!90!black,
  title={Mathematically: \strut#1}
}

%======================================================================%
% Upshot / Take-away variants
%======================================================================%
\newtcolorbox{upshotblocksimp}{
  colframe=purple!70!black,
  colupper=purple!70!black
}

\newtcolorbox{upshotblocktitle}[1][]{
  coltitle=purple!70!black,
  colframe=purple!70!black,
  title={Upshot: \strut#1}
}

\newtcolorbox{upshotblock}{
  detach title,
  coltitle=purple!50!black,
  colframe=purple!50!black,
  title={Upshot},
  overlay={
    \node[rotate=90, minimum width=1cm, anchor=south,yshift=-0.8cm] at (frame.west) {\tcbtitle};
  }
}

\newtcolorbox{remblock}[1][]{
  coltitle=black!70!orange,
  colframe=black!70!orange,
  title={Remark: \strut#1}
}

\newtcolorbox{outlookblock}[1][]{
  coltitle=orange!70!purple,
  colframe=orange!70!purple,
  title={Outlooks: \strut#1}
}

%======================================================================%
% Aside / Keyword side-label boxes (vertical title on the left)
%======================================================================%
\newtcolorbox{asideblock}[1][]{
  coltitle=brown!70!black,
  colframe=brown!70!black,
  leftrule=18pt,
  title={\centering \strut#1},
  overlay unbroken and first={
    \node[
      rotate=90,
      minimum width=1cm,
      anchor=south,
      font=\Large\sffamily\bfseries,
      yshift=-18pt,
      white
    ] at (frame.west) {(aside)};
  }
}

\newtcolorbox{keywordblock}{
  detach title,
  coltitle=black,
  title=keywords,
  left=10mm,
  overlay={
    \node[rotate=90, minimum width=1cm, anchor=south,yshift=-0.8cm] at (frame.west) {\tcbtitle};
  }
}

%======================================================================%
% Notes / Disclaimer
%======================================================================%
\newtcolorbox{disclaimerbox}[1][]{
  coltitle=black!70!white,
  colupper=black!70!white,
  title={Disclaimer: \strut#1},
  frame hidden,
  borderline={0.5pt}{0pt}{black!70!white,dashed}
}

%======================================================================%
% Thematic boxes: TAM (tag on margin)
%======================================================================%
\newtcolorbox{tamblock}{
  detach title,
  coltitle=purple!70!black,
  colframe=purple!70!black,
  title={TAM},
  left=10mm,
  overlay={
    \node[rotate=90, minimum width=1cm, anchor=south,yshift=-0.8cm] at (frame.west) {\tcbtitle};
  }
}

%======================================================================%
% Decorative frames: bracket and zigzag
%======================================================================%
\newtcolorbox{bracketbox}{
  freelance,
  breakable,
  hbox,
  frame code={
    \draw
      ([xshift=1cm]frame.north west) --
      (frame.north west) --
      (frame.south west) --
      ([xshift=1cm]frame.south west);
    \draw
      ([xshift=-1cm]frame.north east) --
      (frame.north east) --
      (frame.south east) --
      ([xshift=-1cm]frame.south east);
  }
}

\newtcolorbox{zigzagbox}{
  freelance,
  breakable,
  hbox,
  frame code={
    \draw[decorate, decoration={zigzag, amplitude=0.05cm}]
      ([xshift=-0.1cm,yshift=0.1cm]frame.north west) --
      ([xshift=-0.1cm,yshift=-0.1cm]frame.south west);
    \draw[decorate, decoration={zigzag, amplitude=0.05cm}]
      ([xshift=-0.1cm,yshift=-0.1cm]frame.south west) --
      ([xshift=0.1cm,yshift=-0.1cm]frame.south east);
    \draw[decorate, decoration={zigzag, amplitude=0.05cm}]
      ([xshift=0.1cm,yshift=-0.1cm]frame.south east) --
      ([xshift=0.1cm,yshift=0.1cm]frame.north east);
    \draw[decorate, decoration={zigzag, amplitude=0.05cm}]
      ([xshift=0.1cm,yshift=0.1cm]frame.north east) --
      ([xshift=-0.1cm,yshift=0.1cm]frame.north west);
  }
}

\mode<all>
%|--------------------------------------------------------------------|